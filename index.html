<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <title>Q2 les 4 Aangifte</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        :root {
            --politie-blauw: #1a3a5a;
            --politie-goud: #fbc02d;
            --licht-blauw: #e3f2fd;
            --wit: #ffffff;
            --grijs: #f4f7f9;
        }

        body { 
            font-family: 'Segoe UI', sans-serif; 
            margin: 0; padding: 0; background-color: var(--grijs);
            height: 100vh; display: flex; flex-direction: column;
        }

        header { 
            background: var(--politie-blauw); 
            color: #b0bec5; 
            padding: 4px 15px; 
            border-bottom: 2px solid var(--politie-goud);
            flex-shrink: 0;
        }
        
        header h1 { font-size: 11px; margin: 0; font-weight: 400; letter-spacing: 0.5px; }

        .instruction-bar {
            background: #ffffff; border-bottom: 1px solid #ccc;
            padding: 12px 15px; font-size: 13px; color: #333; line-height: 1.5;
        }

        .main-layout { display: grid; grid-template-columns: 480px 1fr 400px; flex-grow: 1; overflow: hidden; }

        /* LINKER KOLOM: SCENARIO OPBOUW */
        .stap-kolom { background: var(--licht-blauw); border-right: 2px solid #ccc; display: flex; flex-direction: column; overflow-y: auto; }
        .stap-sectie { padding: 15px; border-bottom: 1px solid #bbdefb; }
        .stap-titel { font-weight: bold; font-size: 13px; color: var(--politie-blauw); margin-bottom: 8px; display: block; text-transform: uppercase; }
        
        .scenario-tekst { font-size: 12.5px; color: #333; line-height: 1.4; margin-bottom: 10px; }
        .ovj-box { background: #ffe0b2; border: 1px solid #fb8c00; padding: 10px; font-size: 12px; margin-top: 10px; border-radius: 4px; }
        
        audio { width: 100%; margin-top: 5px; height: 30px; }

        #chatWindow { flex-grow: 1; padding: 15px; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; background: rgba(255,255,255,0.7); min-height: 200px; }
        .bubble { padding: 8px 12px; border-radius: 8px; font-size: 13.5px; max-width: 90%; line-height: 1.4; }
        .bot { background: var(--wit); align-self: flex-start; border: 1px solid var(--politie-blauw); }
        .user { background: var(--politie-blauw); color: var(--wit); align-self: flex-end; }
        
        .chat-input-area { padding: 10px; background: var(--wit); display: flex; gap: 5px; border-top: 1px solid #ccc; }
        
        /* MIDDEN & RECHTS */
        .werk-kolom { padding: 20px; display: flex; flex-direction: column; gap: 10px; overflow-y: auto; background: var(--wit); }
        textarea { width: 100%; height: 420px; padding: 15px; border: 1px solid #ccc; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 14px; resize: none; box-sizing: border-box; }
        .btn-inleveren { background: var(--politie-blauw); color: var(--wit); padding: 15px; border: none; font-weight: bold; cursor: pointer; text-transform: uppercase; }

        .feedback-kolom { padding: 20px; background: #eceff1; border-left: 2px solid #ccc; overflow-y: auto; }
        .submission-card { background: var(--wit); padding: 15px; border-radius: 6px; margin-bottom: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); border-left: 5px solid var(--politie-goud); }
        .submitted-text { white-space: pre-wrap; font-size: 13.5px; color: #333; margin-bottom: 12px; line-height: 1.5; }
        .feedback-input { width: 100%; height: 70px; background: #fffde7; border: 1px solid var(--politie-goud); padding: 8px; font-size: 12px; box-sizing: border-box; }

        #qrcode { margin: 10px auto; text-align: center; }
    </style>
</head>
<body>

<header>
    <h1>Q2 les 4 Aangifte</h1>
</header>

<div class="instruction-bar">
    <strong>Leerdoelen:</strong> Je kunt een aangiftegesprek voeren en een proces-verbaal schrijven waarin ook aandacht is voor slachtofferzorg en juridische afhandeling.
</div>

<div class="main-layout">
    <aside class="stap-kolom">
        <div class="stap-sectie">
            <span class="stap-titel">Stap 1 & 2: Melding & Ter Plaatse</span>
            <div class="scenario-tekst">Analyseer de melding en de situatie ter plaatse (auto/deur vernield, moker aangetroffen).</div>
            <audio controls><source src="Getuigenverhoor.m4a" type="audio/mp4"></audio>
        </div>

        <div class="stap-sectie">
            <span class="stap-titel">Stap 3: De Afhandeling</span>
            <div class="scenario-tekst">
                De aangever Freek wordt gehoord. Hij herkent Mario op het filmpje van de getuige (dierenwinkel).
            </div>
            <div class="ovj-box">
                <strong>Besluit Officier van Justitie:</strong><br>
                Voldoende grond voor <strong>aanhouding buiten heterdaad (ABH)</strong> van Mario ter zake vernieling.
            </div>
        </div>

        <div class="stap-sectie" style="flex-grow: 1; display: flex; flex-direction: column; border-bottom: none;">
            <span class="stap-titel">Stap 4: Verhoor & Zorg (Freek)</span>
            <div id="chatWindow">
                <div class="bubble bot"><strong>Freek:</strong> "Ik ben echt doodsbang dat Mario terugkomt nu hij weet dat ik aangifte doe. Kunt u me helpen met bescherming?"</div>
            </div>
            <div class="chat-input-area">
                <input type="text" id="userInput" style="flex-grow:1; padding:8px;" placeholder="Praat met Freek...">
                <button onclick="askBot()" style="background:var(--politie-goud); border:none; padding:8px 12px; cursor:pointer; font-weight:bold;">STUUR</button>
            </div>
        </div>
    </aside>

    <main class="werk-kolom">
        <h3 style="margin:0; font-size: 14px; color: var(--politie-blauw);">STAP 5: VOLLEDIG PROCES-VERBAAL</h3>
        <textarea id="pvInput" placeholder="Verwerk de persoonsgegevens van Freek, de feiten, de herkenning van Mario en de verzoeken om hulp in het PV..."></textarea>
        <button class="btn-inleveren" onclick="submitPV()">Inleveren</button>
        <div id="qrcode"></div>
        <p style="text-align:center; font-size: 9px; color: #999; margin: 0;">SCAN VOOR MOBIEL VERHOOR</p>
    </main>

    <aside class="feedback-kolom">
        <h3 style="margin-top:0; font-size: 14px;">REVIEW & FEEDBACK</h3>
        <div id="feedbackLijst">
            <p id="emptyMsg" style="font-size: 12px; color: #888;">Wacht op uitwerking...</p>
        </div>
    </aside>
</div>

<script>
    // Persoonsgegevens Freek (automatisch gegenereerd voor consistentie)
    const freekData = {
        naam: "Freek Jansen",
        geboren: "14-05-1985 te Utrecht",
        adres: "Kerkstraat 12A, 3511 BS Utrecht",
        beroep: "Grafisch vormgever"
    };

    function askBot() {
        const input = document.getElementById('userInput');
        const win = document.getElementById('chatWindow');
        if (!input.value.trim()) return;

        win.innerHTML += `<div class="bubble user">${input.value}</div>`;
        const v = input.value.toLowerCase();
        let r = "Ik weet het niet, ik wil gewoon dat dit stopt.";

        if (v.includes("naam") || v.includes("wie bent u")) r = `Mijn volledige naam is ${freekData.naam}. Ik ben geboren op ${freekData.geboren}.`;
        if (v.includes("adres") || v.includes("woont")) r = `Ik woon op de ${freekData.adres}.`;
        if (v.includes("mario")) r = "Ja, ik herkende hem direct op dat filmpje. We hebben al langer een conflict over de erfscheiding.";
        if (v.includes("hulp") || v.includes("bescherming")) r = "Ik wil graag Slachtofferhulp en ik hoop dat jullie vaker langsrijden. Ik durf bijna niet te slapen.";
        if (v.includes("angst") || v.includes("bang")) r = "Mario is onvoorspelbaar. Die moker tegen mijn deur was een duidelijke boodschap.";

        setTimeout(() => {
            win.innerHTML += `<div class="bubble bot"><strong>Freek:</strong> "${r}"</div>`;
            win.scrollTop = win.scrollHeight;
        }, 500);
        input.value = "";
    }

    function submitPV() {
        const tekst = document.getElementById('pvInput').value;
        const lijst = document.getElementById('feedbackLijst');
        const emptyMsg = document.getElementById('emptyMsg');
        if (!tekst.trim()) return;
        if (emptyMsg) emptyMsg.remove();

        const card = document.createElement('div');
        card.className = 'submission-card';
        card.innerHTML = `<div class="submitted-text">${tekst}</div><textarea class="feedback-input" placeholder="Feedback op PV en Slachtofferzorg..."></textarea>`;
        lijst.prepend(card);
        document.getElementById('pvInput').value = "";
    }

    new QRCode(document.getElementById("qrcode"), { text: window.location.href, width: 80, height: 80 });
    document.getElementById('userInput').addEventListener('keypress', (e) => { if(e.key === 'Enter') askBot(); });
</script>

</body>
</html>
